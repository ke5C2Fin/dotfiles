# ~/.bashrc

# If not running interactively, do not do anything
[[ $- != *i* ]] && return

test -f /etc/bashrc && . /etc/bashrc

if git >/dev/null 2>&1; then
    alias gg='git add *; git commit -m "gg"; git push'
    parse_git_branch() {
        git branch 2>/dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/(\1)/'
    }
fi

if kubectl >/dev/null 2>&1; then
    . <(kubectl completion bash)
    alias k=kubectl
    complete -F __start_kubectl k
    alias kshowns='kubectl api-resources --verbs=list --namespaced -o name | xargs -n 1 kubectl get --show-kind --ignore-not-found -n'
fi

if helm >/dev/null 2>&1; then
    . <(helm completion bash)
fi

test -x /usr/bin/terraform && complete -C /usr/bin/terraform terraform
test -x /usr/bin/packer && complete -C /usr/bin/packer packer

complete -cf sudo
complete -c man which

PS1="\u@\h \W \$(parse_git_branch)\\$ "

EDITOR=vi
PAGER=less
HISTCONTROL=ignoreboth:erasedups

shopt -s histappend

umask 0027

#[[ -z "$TMUX" ]] && exec tmux

test -f ~/.bash_aliases && . ~/.bash_aliases
test -f ~/.bash_site && . ~/.bash_site

mesg n || true
